package com.wilsongateway.framework;

import java.awt.Color;
import java.awt.Graphics2D;
import java.util.ArrayList;

import com.wilsongateway.framework.Board.Stage;

public class Transition {
	
	//Specifies the type of transition to allow a broader use of this class
	public enum TransitionType {FLASH, LOGO_SLIDE, LOGO_SLIDE_VERTICAL, FADE_TO_BLACK};
	
	//Object-Specific Variables
	private TransitionType type;
	private Stage destinationStage;
	private int transitionTick;
	
	//Global variables
	private static ArrayList<Transition> transitions = new ArrayList<Transition>();
	
	/**
	 * The Transition class defines any graphical transition that takes place according to the Game's tick and moves the
	 * Board.current from the current Stage, to the destination Stage.
	 * 
	 * @param type : specifies the type of transition to be started
	 * @param destinationStage : specifies the Stage that the transition will end with
	 */
	Transition(TransitionType type, Stage destinationStage){
		this.type = type;
		this.destinationStage = destinationStage;
		transitionTick = 0;
	}
	
	public void paintTransition(Graphics2D g2d){
		switch(type){
		case FLASH:
			flashTransition(g2d);
			break;
		}
		transitionTick++;
	}
	
	private void flashTransition(Graphics2D g2d){
		float opacity;
		int length;
		
		//Transition Setup, runs only at transitionTick 0
		if(transitionTick == 0){
			length = 120;//How many frames the transition will last (60fps)
			float increment = 1f/(length/2);
			opacity = 0;
		}
		
		if(transitionTick < length/2){
			g2d.setColor(new Color(255, 255, 255, opacity));
		}
	}
	
	//BoilerPlate
	public static ArrayList<Transition> getTransitions(){return transitions;}
}
